<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Details</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="seatStyles.css">
    <link rel="stylesheet" href="foodAndPaymentStyles.css">
    <style type="text/css">
        body{
            margin:0;
            padding:0;
            font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        }
        /* Media query for phone screens */
        @media only screen and (max-width: 600px) {
            main {
                padding: 20px 20px;
            }
            .movielist img {
                margin-right: 10px;
                margin-bottom: 10px;
            }
            .search-container {
                width: 100%;
            }
            .nav-bar {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            .login-box {
                display: none;
            }
        }
        main {
            display:flex;
            flex-direction:column;
        }
        #movie-info{
            display:flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
        }
        #movie-info > *{
            padding: 30px;
        }
        #movie-poster{
            padding:0;
            margin:10px;
            max-width: 30%;
        }
        #movie-details{
            max-width: 60%;
            font-size: 1.25vw;
            margin-left: 10px;
            border-left: 1px solid;
        }
        #bg-info{
            color:gray;
        }
        #movie-timetable.shown{
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #days{
            display:flex;
            flex-direction: row;
            width: 90%;
            margin-top:10px;
            backdrop-filter:blur(15px);
        }
        .day{
            padding: 1%;
            width:15%;
            height:fit-content;
            text-align:center;
            border: 1px solid;
            border-top-left-radius: 15%;
            border-top-right-radius: 15%;
        }
        .day:hover{
            background-color: rgb(70, 72, 72);
        }
        .day > *{
            margin: 0;
        }
        .day > p{
            font-size:1vw;
        }
        #selected {
            border-color: red;
            background: rgba(255,0,0,0.4)
        }
        #schedule{
            width:90%;
            backdrop-filter:blur(15px);
            padding-left: 20px;
            padding-bottom: 20px;
        }
        #schedule > *{
            width: 100%;
        }
        .premium{
            color:gold;
        }
        .movie-times,
        .movie-times td{
            border: 1px solid;
            font-size: 1.75vw;
        }
        .movie-times td{
            padding: 10px;
        }
        .movie-times td:hover{
            background-color: rgb(70, 72, 72);
        }
        .seatButtons{
            width: 7vw;
            height: 5vh;
            background-color: gray;
        }
        .seatButtons:hover{
            background-color: lightgray;
        }

        /* To move sections */
        .hidden {
            display: none;
        }
    </style>
    <script type="text/javascript">
        window.onload = function() {
            var data = {
                date: document.getElementById('selected').lastElementChild.innerHTML,
                time: '',
                nTickets: 0
            }

            const locations = document.getElementsByClassName('movie-times');
    
            for (const location of locations) {
                const times = location.firstElementChild.children;

                for (const time of times) {
                    time.addEventListener("click", e => {

                    document.getElementById("seat-section").className = "";
                    document.getElementById("movie-timetable").className = "hidden";
                })
                }
            }

            const availableSeats = document.getElementsByClassName('seat');
    
            for (const seat of availableSeats) {
                seat.addEventListener("click", e => {
                    seat.classList.toggle("seatSelected");
                })
            }
        }
        function becomeSelected(day){
            document.getElementById('selected').id = '';
            day.id = 'selected';
            data[date] = day.lastElementChild.innerHTML;
        }
        function selectedTime(time){
            data[time] = time.innerHTML
        }
        function goBack(){
            const selectedSeats = document.getElementsByClassName('seatSelected');
    
            for (const seat of selectedSeats) {
                seat.classList.toggle("seatSelected");
            }
            document.getElementById("movie-timetable").className = "";
            document.getElementById("seat-section").className = "hidden";
        }
        function goNext(){
            document.getElementById("seat-section").className = "hidden";
            document.getElementById("F&P").className = "";
        }
    </script>
</head>
<body>

<header>
    <section style="flex-grow: 1">
        <figure>
        <img alt="logo" title="MOViE LAND" width="300" src="images/logo.png" />
        </figure>
    </section>
        
    <section style="flex-grow: 9">
        <section class="search-container">
            <img src="images/search.jpg" width="15" alt="Search" />&nbsp;<input type="text" id="search-bar" placeholder="Type here to search..." style="width:60%;">
        </section>
        &nbsp;
        <section class="nav-bar">
            <a href="index.html" class="nav-link">Home</a>
            <a href="contact.html" class="nav-link">Contact Us</a>
            <a href="#" class="nav-link">About us</a>
        </section>
    </section>
    <section class="login-box">
        <a href="#" class="login-link"><img src="images/profile.jpg" width="20" alt="login_profile" /></a>
    </section>
    <section class="login-box">
        <a href="#" class="login-link"><img src="images/signup.jpg" width="20" alt="settings" /></a>
    </section>
</header>

    <main>
        <section id="movie-info">
            <img id="movie-poster" src="images/kung-fu-panda-4-poster.webp" alt="Kungfu Panda 4 Movie Poster"/>
            <section id="movie-details">
                <h1><u>Kung Fu Panda 4</u></h1>
                <p><u><b>Genre:</b></u> Adventure, Animation</p>
                <p><u><b>Duration:</b></u> 2h 30m</p>
                <h4><u>Directed by</u> Mike Mitchell, Stephanie Stine. With Jack Black, Awkwafina, Viola Davis, Dustin Hoffman.</h4>
                <p id="bg-info">The film was directed by Mike Mitchell, co-directed by Stephanie Ma Stine (in her feature directorial debut), written by Darren Lemke and the writing team of Jonathan Aibel and Glenn Berger, and produced by Rebecca Huntley. It features Jack Black, Dustin Hoffman, James Hong, Bryan Cranston, and Ian McShane reprising their roles from the previous films, with Awkwafina, Ke Huy Quan, Ronny Chieng, Lori Tan Chinn, and Viola Davis joining the cast. In the film, Po (Black), who must find and train his successor as the new Dragon Warrior, teams up with fox bandit Zhen (Awkwafina) to defeat the evil sorceress, the Chameleon (Davis).</p>
                <hr/>
                <p>After Po is tapped to become the Spiritual Leader of the Valley of Peace, he needs to find and train a new Dragon Warrior, while a wicked sorceress plans to re-summon all the master villains whom Po has vanquished to the spirit realm.
                    Po is gearing up to become the spiritual leader of his Valley of Peace, but also needs someone to take his place as Dragon Warrior. As such, he will train a new kung fu practitioner for the spot and will encounter a villain called the Chameleon who conjures villains from the past.</p>
            </section>
        </section>
        <hr style="width:98%;"/>
        
        <!-- FIRST SECTION WHEN BUYING TICKET -->
        <section id="movie-timetable" class="shown">
            <section id="days">
                <section class="day" id="selected" onclick="becomeSelected(this)">
                    <h2>Monday</h2>
                    <p>25/3</p>
                </section>
                <section class="day" onclick="becomeSelected(this)">
                    <h2>Tuesday</h2>
                    <p>26/3</p>
                </section>
                <section class="day" onclick="becomeSelected(this)">
                    <h2>Wednesday</h2>
                    <p>27/3</p>
                </section>
                <section class="day" onclick="becomeSelected(this)">
                    <h2>Thursday</h2>
                    <p>28/3</p>
                </section>
                <section class="day" onclick="becomeSelected(this)">
                    <h2>Friday</h2>
                    <p>29/3</p>
                </section>
                <section class="day" onclick="becomeSelected(this)">
                    <h2>Saturday</h2>
                    <p>30/3</p>
                </section>
                <section class="day" onclick="becomeSelected(this)">
                    <h2>Sunday</h2>
                    <p>31/3</p>
                </section>
            </section>
            <section id="schedule">
                <section class="premium">
                    <h2>IOI City Mall <i>Premium</i> 40RM</h2>
                    <table class="movie-times">
                        <tr>
                            <td>10:00</td>
                            <td>12:00</td>
                            <td>14:00</td>
                            <td>16:00</td>
                            <td>10:00</td>
                            <td>12:00</td>
                            <td>14:00</td>
                            <td>16:00</td>
                        </tr>
                    </table>
                </section>
                <section class="standard">
                    <h2>IOI City Mall 25RM</h2>
                    <table class="movie-times">
                        <tr>
                            <td>10:00</td>
                            <td>12:00</td>
                            <td>14:00</td>
                            <td>16:00</td>
                            <td>10:00</td>
                            <td>16:00</td>
                        </tr>
                    </table>
                </section>
                <section class="standard">
                    <h2>KUALALUMPUR Mall 25RM</h2>
                    <table class="movie-times">
                        <tr>
                            <td>10:00</td>
                            <td>12:00</td>
                            <td>14:00</td>
                            <td>16:00</td>
                            <td>12:00</td>
                            <td>14:00</td>
                            <td>16:00</td>
                            <td>10:00</td>
                        </tr>
                    </table>
                </section>
                <section class="standard">
                    <h2>Khartoum Mall 25RM</h2>
                    <table class="movie-times">
                        <tr>
                            <td>10:00</td>
                            <td>12:00</td>
                            <td>14:00</td>
                            <td>16:00</td>
                        </tr>
                    </table>
                </section>
            </section>
        </section>

        <!-- THE NEXT SECTION AFTER USER SELECTS DATE -->
        <section id="seat-section" class="hidden">
            <h1>Select your seats</h1>
            <table align="center" width="700px" height="280px">
                <tr>
                    <th></th>
                    <th>1</th>
                    <th>2</th>
                    <th>3</th>
                    <th></th>
                    <th>4</th>
                    <th>5</th>
                    <th>6</th>
                    <th>7</th>
                    <th>8</th>
                    <th>9</th>
                    <th></th>
                    <th>10</th>
                    <th>11</th>
                    <th>12</th>
                </tr>
                <tr>
                    <th>A</th>
                    <td><section class="seatNotAvailable"></section></td>
                    <td><section class="seatNotAvailable"></section></td>
                    <td><section class="seatNotAvailable"></section></td>
                    <td>&nbsp &nbsp &nbsp</td>
                    <td><section class="seat"></section></td>
                    <td><section class="seatReserved"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td>&nbsp &nbsp &nbsp</td>
                    <td><section class="seatNotAvailable"></section></td>
                    <td><section class="seatNotAvailable"></section></td>
                    <td><section class="seatNotAvailable"></section></td>
                </tr>
                <tr>
                    <th>B</th>
                    <td><section class="seatNotAvailable"></section></td>
                    <td><section class="seatNotAvailable"></section></td>
                    <td><section class="seatNotAvailable"></section></td>
                    <td>&nbsp &nbsp &nbsp</td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td>&nbsp &nbsp &nbsp</td>
                    <td><section class="seatNotAvailable"></section></td>
                    <td><section class="seatNotAvailable"></section></td>
                    <td><section class="seatNotAvailable"></section></td>
                </tr>
                <tr>
                    <th>C</th>
                    <td><section class="seat"></section></td>
                    <td><section class="seatReserved"></section></td>
                    <td><section class="seat"></section></td>
                    <td>&nbsp &nbsp &nbsp</td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td>&nbsp &nbsp &nbsp</td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                </tr>
                <tr>
                    <th>D</th>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td>&nbsp &nbsp &nbsp</td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seatReserved"></section></td>
                    <td><section class="seatReserved"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td>&nbsp &nbsp &nbsp</td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                </tr>
                <tr>
                    <th>E</th>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td>&nbsp &nbsp &nbsp</td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td>&nbsp &nbsp &nbsp</td>
                    <td><section class="seat"></section></td>
                    <td><section class="seatReserved"></section></td>
                    <td><section class="seat"></section></td>
                </tr>
                <tr>
                    <th>F</th>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seatReserved"></section></td>
                    <td>&nbsp &nbsp &nbsp</td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td>&nbsp &nbsp &nbsp</td>
                    <td><section class="seat"></section></td>
                    <td><section class="seatReserved"></section></td>
                    <td><section class="seatReserved"></section></td>
                </tr>
                <tr>
                    <th>G</th>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td>&nbsp &nbsp &nbsp</td>
                    <td><section class="seatReserved"></section></td>
                    <td><section class="seatReserved"></section></td>
                    <td><section class="seatReserved"></section></td>
                    <td><section class="seatReserved"></section></td>
                    <td><section class="seatReserved"></section></td>
                    <td><section class="seatReserved"></section></td>
                    <td>&nbsp &nbsp &nbsp</td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                </tr>
                <tr>
                    <th>H</th>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td>&nbsp &nbsp &nbsp</td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td>&nbsp &nbsp &nbsp</td>
                    <td><section class="seatReserved"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                </tr>
                <tr>
                    <th>I</th>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td>&nbsp &nbsp &nbsp</td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seatReserved"></section></td>
                    <td><section class="seatReserved"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td>&nbsp &nbsp &nbsp</td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                    <td><section class="seat"></section></td>
                </tr>
                <tr>
                    <td colspan="15"></td>
                    <table align="center" valign="middle">
                        <tr>
                            <th>Available:</th>
                            <td><section class="displayAvailableColor"></section></td>
                            <td>&nbsp &nbsp &nbsp &nbsp</td>
                            <th>Reserved:</th>
                            <td><section class="displayReservedColor"></section></td>
                            <td>&nbsp &nbsp &nbsp &nbsp</td>
                            <th>Not Available:</th>
                            <td><section class="displayNotAvailableColor"></section></td>
                            <td>&nbsp &nbsp &nbsp &nbsp</td>
                        </tr>
                    </table> 
                </tr>
            </table>
            <section id="buttons" style="margin-top: 10px;">
                <button class="seatButtons" style="transform: translate(-5vw, 0%)" onClick="goBack()">Back</button>
                <button class="seatButtons" style="transform: translate(5vw, 0%)" onClick="goNext()">Next</button>
            </section>
        </section>

        <!-- NEXT SECTION FOOD AND PAYMENT -->
        <section id="F&P" class="hidden">
            <h1 style="text-align:center;">Buy Some Food</h1>
            <section id="foodAndPayment-section">
                <section id="food-section">
                    <section id="combos">
                        <h2>Combo Deals</h2>
                        <section class="carousel">
                            <section class="carousel-item">
                                <img src="images/deal1.png" alt="Popcorn, chicken, and coca cola" style="width: 134px; height: 180px;">
                                <p class="price">$3.99</p>
                                <section class="quantity">
                                    <button class="decrease">-</button>
                                    <input type="number" value="1" min="1">
                                    <button class="increase">+</button>
                                </section>
                                <button class="add-to-cart" data-id="combo1" data-price="3.99">Add to Cart</button>
                            </section>
                            <!-- Add more items as needed -->
                        </section>
                    </section>
        
                    <section id="food">
                        <h2>Food</h2>
                        <section class="carousel" style="display: flex; justify-content: left;">
                            <section class="carousel-item">
                                <img src="images/popcorn.1png.png" alt="Popcorn" style="width: 80px; height: 100px;">
                                <p class="price">$5.99</p>
                                <section class="quantity">
                                    <button class="decrease">-</button>
                                    <input type="number" value="1" min="1">
                                    <button class="increase">+</button>
                                </section>
                                <button class="add-to-cart" data-id="popcorn" data-price="5.99">Add to Cart</button>
                            </section>
                            <section class="carousel-item">
                                <img src="images/soda.png" alt="Soda" style="width: 80px; height: 100px;">
                                <p class="price">$0.99</p>
                                <section class="quantity">
                                    <button class="decrease">-</button>
                                    <input type="number" value="1" min="1">
                                    <button class="increase">+</button>
                                </section>
                                <button class="add-to-cart" data-id="soda" data-price="0.99">Add to Cart</button>
                            </section>
                        </section>
                    </section>
                </section>
                <section id="payment">
                    <!-- Add this to your HTML where the cart is displayed -->
                    <section id="cart">
                        <!-- Cart items will be added here -->
            
                    </section>
                    <section id="checkout">
                        <h2>Checkout</h2>
                        <section id="total"></section>
                        <a href="checkout.html"><button id="checkout-button">Proceed to Checkout</button></a>
                    </section>
                </section>
            </section>
        </section>
        
    <script>// script.js

        let cart = {};

        document.querySelectorAll('.add-to-cart').forEach(button => {
            button.addEventListener('click', event => {
                const price = parseFloat(event.target.dataset.price);
                const quantityInput = event.target.previousElementSibling.querySelector('input');
                const quantity = parseInt(quantityInput.value);
                const total = price * quantity;

                const itemId = event.target.dataset.id;
                if (cart[itemId]) {
                    cart[itemId].quantity += quantity;
                    cart[itemId].total += total;
                } else {
                    cart[itemId] = {
                        price,
                        quantity,
                        total
                    };
                }

                updateCart();
                announce(`Added ${quantity} of Item ${itemId} to the cart. Total bill is now $${total.toFixed(2)}`); // Announce changes for screen readers
            });
        });

        document.querySelectorAll('.decrease').forEach(button => {
            button.addEventListener('click', event => {
                const input = event.target.nextElementSibling;
                if (input.value > 1) {
                    input.value = parseInt(input.value) - 1;
                }
            });
        });

        document.querySelectorAll('.increase').forEach(button => {
            button.addEventListener('click', event => {
                const input = event.target.previousElementSibling;
                input.value = parseInt(input.value) + 1;
            });
        });

        function updateCart() {
            const cartElement = document.getElementById('cart');
            cartElement.innerHTML = '';

            let total = 0;
            let table = document.createElement('table');

            // Add table header
            let header = table.insertRow();
            header.insertCell().textContent = 'Item Name';
            header.insertCell().textContent = 'Price';
            header.insertCell().textContent = 'Quantity';
            header.insertCell().textContent = 'Total';

            for (const itemId in cart) {
                const item = cart[itemId];

                let row = table.insertRow();
                row.insertCell().textContent = `${itemId}`;
                row.insertCell().textContent = `$${item.price.toFixed(2)}`;
                row.insertCell().textContent = item.quantity;
                row.insertCell().textContent = `$${item.total.toFixed(2)}`;

                total += item.total;
            }

            cartElement.appendChild(table);
            document.getElementById('total').textContent = `Total Bill: $${total.toFixed(2)}`;
            announce(`Total bill is now $${total.toFixed(2)}`); // Announce updated total bill
        }
    </script>


    </main>
    <footer>
        <section id="footer-top">
            <section id="connect">
                <h6><b>Connect with us</b></h6>
                <p>Reach us at <a href="mailto:some_account!!!">*@gmail.com</a> or through our <a href="contact.html">online contact form</a>.</p>
                <section id="social-media">
                    <a href="youtube.com"><img src="images/youtube.jpg" width="40" alt="Youtube"></a>
                    <a href="instagram.com"><img src="images/instagram.jpg" width="40" alt="Instagram"></a>
                    <a href="facebook.com"><img src="images/facebook.jpg" width="40" alt="Facebook"></a>
                    <a href="linkedin.com"><img src="images/linkedin.jpg" width="40" alt="Linkedin"></a>
                    <a href="x.com"><img src="images/twitter.jpg" width="40" alt="X"></a>
                </section>
                <p>Have questions? Check our <a href="Frequent_questions.html">frequently asked questions</a>!</p>
            </section>
            <hr>
            <section id="member">
                <h6><b>Become a member!</b></h6>
                <p>Join our 500,000 community members and get a decent discount on your weekend's movie nights!</p>
                <section class="form-box">
                    <form>
                        <label for="email">Email:</label>
                        <input type="email" id='email' name='email' placeholder='Enter your email address...' required>
                        <button type="submit">Subscribe</button>
                    </form>
                </section>
            </section>
        </section>
        <hr style="width:100%;margin:0;">
        <section id="footer-bottom">
            <section>
                <figure>
                    <img alt="logo" title="MOViE LAND" width="200" src="images/logo.png">
                </figure>
            </section>
            <section id="extras">
                <p><a href="About-us.html">About us</a></p>
                <p><a href="Privacy_policy.html">Terms of use and privacy policy</a></p>
                <p>&copy; 2024 MOViE LAND</p>
            </section>
        </section>
    </footer>
</body>
</html>